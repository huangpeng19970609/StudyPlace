### 	åºè¨€

ECMAScriptæŒ‡JavaScriptçš„æ ¸å¿ƒè¯­æ³•ï¼Œ

æ‰€ä»¥æˆ‘ä»¬è¯´JSç‰ˆæœ¬çš„æ—¶å€™æ˜¯è¯´ES5ï¼Œ ES6ï¼ˆæ²¡æœ‰JS5æˆ–è€…JS6ï¼‰

JSåˆ†ä¸º `ECMA`  ã€`DOM`ï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰ ä¸ `BOM`(æµè§ˆå™¨å¯¹è±¡æ¨¡å‹)

ğŸ‘‡æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹è®¿é—®åˆ°BOMçš„å±æ€§ï¼Œç±»ä¼¼APIæ¥å£ï¼Œå…¶éš¶å±äºGlobalå¯¹è±¡

- window(BOMçš„æ ¸å¿ƒ)
- location
- navigator
- screen
- history

## ç¬¬ä¸ƒç«  BOM

#### 1 windowå¯¹è±¡

BOMçš„æ ¸å¿ƒä¾¿æ˜¯windowã€‚windowæ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡, windowå³`æµè§ˆå™¨çš„å®ä¾‹`

ï¼ˆBOMå¯¹è±¡çš„æ ¸å¿ƒ`documentä¹Ÿéš¶å±äºwindowä¸‹`ï¼‰

```js
æˆ‘ä»¬ä¸€èˆ¬è¿™æ ·è®¿é—®: document.getElementById();
ä½†å…¶å®è¿™æ ·ä¹Ÿå¯ä»¥ window.document.getElementById();
æ³¨: è¿™ä¸¤ä¸ªå£°æ˜å”¯ä¸€çš„åŒºåˆ«åœ¨äºï¼Œ
	var age = 100;	delete window.ageä¸å¯ä»¥ï¼å› ä¸ºå±æ€§ç‰¹æ®Šçš„é»˜è®¤è®¾ç½®ä¸ºfalse
	window.age = 100;  delete window.ageæ˜¯å¯ä»¥çš„
```

##### 1 çª—å£å…³ç³»åŠæ¡†æ¶

é¡µé¢è‹¥åŒ…å«æ¡†æ¶ => æ¯ä¸ªçª—å£æ¡†æ¶éƒ½ä¼šæœ‰è‡ªå·±çš„windowå¯¹è±¡ä¸”éƒ½ä¿å­˜åœ¨`framesé›†åˆ`ï¼Œ`å¯é€šè¿‡ä¸‹æ ‡ï¼ˆæˆ–æ¡†æ¶åç§°`ï¼‰æ¥è®¿é—®è¿™äº›windowå®ä¾‹

```html
<html>
    <head></head>
    <frameset rows="160, *">
    	<frameset src="frame.html" name="topFrame"></frameset>
        <frameset clos="50%, 50%">
            <frameset name="leftFrame"></frameset>
            <frameset name="rightFrame"></frameset>
        </frameset>
    </frameset>
</html>
// 
	0 0   =>    1  1   <=  ç±»ä¼¼è¿™ç§å¸ƒå±€
    0 0   		2  3
```

`è®¿é—®æ–¹å¼:`

1. windowæŒ‡å½“å‰çª—ä½“, selftæŒ‡å½“å‰çª—å£
2. topæŒ‡å½“å‰æ¡†æ¶çš„é¡¶å±‚çª—å£

å…¶ä¹Ÿå¯ç”¨parentï¼Œä½†parentæŒ‡å½“å‰çš„ä¸Šä¸€çº§æ¡†æ¶ï¼Œå¯èƒ½ç­‰äºtopï¼

```js
#å½“å‰çª—å£çš„æ¡†æ¶
window.frame[0]   ä¸‹æ ‡çš„è§„å¾‹ï¼Œä»åšåˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹
selft.frame[0]
frame[0]

#è®¿é—®å½“å‰çª—å£æ‰€åœ¨æ¡†æ¶ä¸‹ topFrameè¿™ä¸ªçª—å£
window.frame["topFrame"]

#é¡¶å±‚çª—å£
top 		 å½“å‰æ¡†æ¶çš„é¡¶å±‚çª—å£
self.top	 å½“å‰æ¡†æ¶çš„é¡¶å±‚çª—å£

# parent
parent.frame[0]
parent.frame["topFrame"]
```

##### 2 çª—å£ä½ç½®ä¸å¤§å°

1. è·å–æµ`è§ˆå™¨è·ç¦»å½“å‰å±å¹•`å·¦ä¸ä¸Šçš„è·ç¦»(è™½ç„¶å®é™…æ„ä¹‰ä¸å¤§)

   ```js
   var leftPos = (tyoeof screenLeft === 'number' ? screenLeft : screenX);
   var TopPos  = (tyoeof screenTop  === 'number' ? screenTop  : screenY);
   ```

2. è·å–`å½“å‰çª—ä½“å¤§å°ï¼Œ æ²¡æœ‰ä¼˜ç§€åŠæ³•ç²¾ç¡®è·å–ã€‚

   ä¸è¿‡ç¡®å®è·å–çª—ä½“å¤§å°å¯¹äºæˆ‘ä»¬æ¥è¯´æ²¡æœ‰å¤ªå¤§çš„æ„ä¹‰ï¼Œé‡è¦çš„æ˜¯`è§†å£å¤§å°`ï¼

   ```js
   var w = window.innerWidth; 		=> è§†å£å®½åº¦
   var h = window.innerHeight; 	=> è§†å£é«˜åº¦
   ```

##### 3 æ–°çª—å£ ã€å®šæ—¶å™¨ä¸ç³»ç»Ÿå¯¹è¯æ¡†

1. `æ–°çª—å£`\

   window.open(URL, çª—å£ç›®æ ‡ï¼Œ ç‰¹æ€§å­—ç¬¦ä¸²ï¼Œ æ˜¯å¦è¦†ç›–å†å²è®°å½•)

   ```js
   #çª—å£ç›®æ ‡ï¼š
   	æŒ‡å“ªä¸€ä¸ªæ¡†æ¶ä¸‹å»åŠ è½½å¯¹åº”çš„çª—ä½“ã€‚
   	ä¾‹: window.open('www.baidu.com', 'topFrame');
   	ç‰¹æ®Šå‚æ•°: _self, _parent, _top, _blank
   
   #ç‰¹æ€§å­—ç¬¦ä¸²ï¼šæ§åˆ¶çª—ä½“çš„æ ·å¼ï¼Œ
   	ä¾‹å­ï¼š window.open('xx', 'xx', "height=400,width=400");
       [è®¾ç½®]				[å€¼]					è§£é‡Š:
       fullScreen			yes || no			 æµè§ˆå™¨æ˜¯å¦æœ€å¤§åŒ–ï¼Œä»…é™ie
       height				number				 ä¸å¯å°äº100
       width
       left				number 				 å·¦åæ ‡
       top
       location			yes || no			 æ˜¯å¦æ˜¾ç¤ºåœ°å€æ 
       toolbar
       status
       scroolbars								 æ˜¯å¦å¯æ»šåŠ¨ï¼Ÿé»˜è®¤ä¸ºå¦
       resizeable
   ```

   å¯¹äºwindow.openæ–°æ‰“å¼€çš„çª—ä½“

   var w = window.open();

   w.close(); // ä»…é™window.openæ‰“å¼€çš„

   `w.opener(); => è¿™æ˜¯ä¸€ä¸ªè¿”å›æ‰“å¼€å®ƒçš„åŸå§‹çª—ä½“å¯¹è±¡`

   è‹¥æ˜¯ä»¤w.opener = nullï¼› åˆ™ä»¤å…¶æ— æ³•æ¢å¤ï¼Œä»£è¡¨å…¶ä¸èƒ½ä¸å…¶ä»–æ ‡ç­¾é€šä¿¡ï¼Œç‹¬ç«‹è¿›ç¨‹ã€‚

2. `å®šæ—¶å™¨`

   é¦–å…ˆï¼š JSæ˜¯å•çº¿ç¨‹è¯­è¨€ã€‚

   ```js
   setTimeout(callback, 1000);
   setInterval(callback, 1000);
   # æ¸…é™¤å®šæ—¶å™¨ , ä¸è¦ä»¤å…¶ä¸ºnullï¼Œ å¹¶éæ˜¯æ¸…æ¥š
   clearTimeout(time);
   ```

3. `ç³»ç»Ÿå¯¹è¯æ¡†`

   ```js
   alert  confirm prompt è¿™äº›ç³»ç»Ÿè‡ªå¸¦çš„å¼¹çª—æ¡†ï¼Œ æ ·å¼ç”±æµè§ˆå™¨ä¾›åº”å•†å†³å®š
   ä½¿ç”¨è¿™å‡ ä¸ªæ–¹æ³•æ—¶ï¼Œæ˜¯åŒæ­¥ä¸æ¨¡æ€çš„ï¼Œä¼šä½¿å¾—å½“å‰æ‰§è¡Œçš„jsä»£ç åœæ­¢æ‰§è¡Œã€‚
   
   æ³¨ï¼š
   	confirm("yes, no ?"); => æ ¹æ®ç”¨æˆ·çš„æ“ä½œä¼šè¿”å› true æˆ– false
   ```

#### 2 location

æµè§ˆå™¨çª—å£æœ‰locationå¯¹è±¡ï¼Œ`ç”¨äºæä¾›å½“å‰çª—å£åŠ è½½çš„æ–‡æ¡£çš„æœ‰å…³ä¿¡æ¯ä¸å¯¼èˆªåŠŸèƒ½`

1. window.loaction === document.location

```js
# locationä¸‹æœ‰ä»¥ä¸‹å±æ€§å¯ä»¥ä½¿ç”¨
	1 hash				=> å“ˆå¸Œå€¼
    2 host				=> æœåŠ¡å™¨å+ç«¯å£å·
    3 href				=> å®Œæ•´URL
    4 pathname			=> ç›®å½•/æ–‡ä»¶
    5 port				=> ç«¯å£å·
    6 protocal			=> åè®®å
    7 search			=> URLæŸ¥è¯¢å­—ç¬¦ä¸² ä¾‹: â€œ?q=jsâ€;
ğŸ‘†å½“ä½ æ‰‹åŠ¨å»ä¿®æ”¹ä»¥ä¸Šçš„å±æ€§çš„æ—¶å€™éƒ½ä¼šè®©é¡µé¢ä»¥æ–°URLé‡æ–°åŠ è½½ï¼ˆhashé™¤å¤–ï¼‰
 	location.port = '8080';   
    
#ä¿®æ”¹locationçš„å±æ€§å®ç°ä¸€äº›åŠŸèƒ½
    location.assign('http://...'); å³å¯å®ç°å½“å‰é¡µé¢çš„è·³è½¬
    location.replace("http://..."); è·³è½¬ï¼Œä½†æ— å†æ˜¯è®°å½•
    location.reload(); 		=> é‡è½½
	location.reload(true);	=> å¼ºåˆ¶ä»æœåŠ¡å™¨é‡è½½
```

- æŸ¥è¯¢å­—ç¬¦ä¸²çš„æ–¹æ³•

  ```js
  function getQueryArgs(url){
      var qs = (url.length > 0 ? url.substring(url.indexOf('?')).substr(1) : ''),
          //ä¿å­˜æ¯ä¸€é¡¹
          args = {},
          //å¾—åˆ°æ¯ä¸€é¡¹
          items = qs.length ? qs.split('&') : [],
          item = null,
          name = null,
          value = null,
          i = 0,
          len = items.length;
   
          for(i = 0;i<len ;i++){
              item = items[i].split('='),
              name = decodeURIComponent(item[0])
              value = decodeURIComponent(item[1])
              if(name.length){
                  args[name] = value;
              }
          }
          return args;
  }
  ```

  

#### 3 navigator

1. ç”¨äºè¯†åˆ«å®¢æˆ·ç«¯çš„æµè§ˆå™¨
2. æ£€æµ‹æµè§ˆå™¨æ’ä»¶
3. æ³¨å†Œå¤„ç†ç¨‹åº

#### 4 screen

1. æ˜¾ç¤ºæ˜¾ç¤ºå™¨çš„ä¿¡æ¯

2. æ˜¾ç¤ºå™¨çš„å®½é«˜

   PS: åª’ä½“æŸ¥è¯¢çš„ screenæŸ¥è¯¢ æŒ‡çš„å°±æ˜¯æ˜¾ç¤ºå™¨å±å¹•çš„å¤§å°

#### 5 history

```js
history.go(-1); 	=> history.back();
history.go(1); 		=> history.forward();
â€‹```ã€



## ç¬¬å…«ç«  DOM

æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œä¾‹å±äºwindowä¸‹æœ‰ä¸€ä¸ªdocumentå¯¹è±¡.

1. æ¯ä¸€ä¸ªæ–‡æ¡£çš„ã€æ ¹èŠ‚ç‚¹ã€‘æˆ‘ä»¬ç§°ä¹‹ä¸ºã€æ–‡æ¡£èŠ‚ç‚¹ã€‘ => å¯ä»¥è®¤ä¸ºå…¶ä¸ºdocument

2. ã€æ–‡æ¡£èŠ‚ç‚¹ã€‘åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œä¾‹å¦‚<html>å…ƒç´ ï¼Œç§°å…¶ä¸ºæ–‡æ¡£å…ƒç´ 

3. ã€æ–‡æ¡£å…ƒç´ ã€‘æ˜¯æ–‡æ¡£æœ€å¤–å±‚çš„å…ƒç´ ï¼Œæ–‡æ¡£å…¶ä½™å…ƒç´ éƒ½è¢«åŒ…è£¹åœ¨å…¶ä¸­ã€‚

   æ¯ä¸€ä¸ªæ–‡æ¡£åªèƒ½æœ‰ä¸€ä¸ªã€æ–‡æ¡£å…ƒç´ ã€‘ã€‚

   `åœ¨HTMLé¡µé¢é‡ŒÂ·ï¼Œæ–‡æ¡£å…ƒç´ å§‹ç»ˆæ˜¯<html>å…ƒç´ `

â€‹```js
#ä»¥ä¸Š ç®€è€Œè¨€ä¹‹
document: {  					=> ã€æ–‡æ¡£ã€‘ï¼ˆæˆ–è€…å«åšæ–‡æ¡£å…ƒç´ ï¼‰
    html: {	 					=> ã€æ–‡æ¡£å…ƒç´ ã€‘(æ–‡æ¡£çš„å­èŠ‚ç‚¹ï¼Œä¸”åªæœ‰ä¸€ä¸ª)
        head: {},				=> [å…ƒç´ èŠ‚ç‚¹]
        body: {},
    }
}
```

#### ä¸€ Nodeæ“ä½œ

æœ‰12ä¸ªèŠ‚ç‚¹ => ä»¥èŠ‚ç‚¹ç±»å‹åäºŒä¸ªä¸åŒçš„å¸¸é‡åŒºåˆ†.

åŸºäºèŠ‚ç‚¹æ„é€ å‡½æ•°å®ç°ï¼ŒIEæœªå…¬å¼€æ„é€ å‡½æ•°ã€‚å¯è®¿é—®å…¶`nodeName`ä¸`nodeValue`

```js
if (someNode.nodeType === 1) alert('the node is an element')
```

##### 1 èŠ‚ç‚¹å…³ç³»(åŒèƒçˆ¶å­)

- å…³ç³»æ˜¯åŠ¨æ€çš„ï¼Œç›¸äº’çš„

- `å­`ï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰`childNodes`å±æ€§ï¼Œå…¶ä¸­ä¿å­˜ç€NodeListå¯¹è±¡ã€‚

  1. NodeListæ˜¯ç±»æ•°ç»„ï¼ŒåŸºäºDOMè§£æ„åŠ¨æ€è‡ªåŠ¨æ›´æ–°çš„ï¼Œéé™æ€çš„

  ```js
  var one = someNode.childNodes[0];		=> è®¿é—®èŠ‚ç‚¹çš„æ–¹æ³•ä¸€ ä¸‹æ ‡è®¿é—®ï¼ˆé€€ä»¶ï¼‰
  var two = someNode.childNodes.item(1);	=> è®¿é—®èŠ‚ç‚¹çš„æ–¹æ³•äºŒ	itemå±æ€§è®¿é—®
  var count = someNode.childNodes.length; => NodeListèŠ‚ç‚¹æ•°é‡
  ```

  

- `çˆ¶` : æ¯ä¸ªèŠ‚ç‚¹çš†æœ‰`parentNode`å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘æ–‡æ¡£æ ‘çš„çˆ¶èŠ‚ç‚¹ã€‚

- `åŒèƒ`

  1. someNode.`nextSibling`
  2. someNode.`previousSibling`

- çˆ¶å­å…³ç³»

  `firstChild`

  `lastChild`

  ```js
  someNode.parentNode.firstChild === someNode.childNodes[0];
  someNode.parentNode.lastChild 
      === someNode.childNodes[someNode.childNodes.length -1]
  ```

å…³ç³»å›¾

```js
						  node1		
node1.childNode[0]	  â†“			â†“   node1.childNode[node1.childNode.length-1]
node1.lastNode		  â†“			â†“   node1.lastNode;
					node2		node3
                    			(node1 å³ node2.parentNode)
                    			(node2 å³ node3.previousSibling()	);
                    			(node3 å³ node2.nextSibling()	)
// åŒèƒçˆ¶å­4ä¸ªæ–¹æ³•ï¼Œ çˆ¶è®¿é—®å­å¦å¤–ä¸¤ä¸ªæ–¹æ³•
```

##### 2 æ“ä½œèŠ‚ç‚¹

- `appendChild`
- `insetBefore`
- `replaceChild`
- `cloneNode`
- `normalize`

```js
# appendChild
	node1.appendChild(node1.firstChild);

	1  è¿”å›æ–°å¢èŠ‚ç‚¹
	2 å·²å­˜åœ¨èŠ‚ç‚¹ä¸èƒ½åŒæ—¶å­˜åœ¨è¯¥æ–‡æ¡£çš„å¤šä¸ªä½ç½®ä¸Šï¼ˆDOMæ ‘æ˜¯æŒ‡é’ˆè¿æ¥çš„ï¼‰
    3 è¿™æ ·ä¼šè®© å°†ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹å˜ä¸ºæœ€åä¸€ä¸ªå­èŠ‚ç‚¹ï¼ŒPsï¼š çˆ¶èŠ‚ç‚¹çš„childNodesé•¿åº¦å˜
-----------------------------
# insetBefore
	node1.insertBefore(æ’å…¥èŠ‚ç‚¹, å‚ç…§èŠ‚ç‚¹);
	1 è‹¥å‚ç…§èŠ‚ç‚¹ä¸ºnullï¼Œå³ç­‰åŒäºappendChild
-----------------------------
# replaceChild
    node1.replaceNode(å°†è¦æ›¿æ¢çš„node, å‚ç…§node)
-----------------------------
# cloneNode
    clodeNode(isDeep);
	// æ·±å¤åˆ¶: å¤åˆ¶å…¶ ä¸ å…¶å­èŠ‚ç‚¹æ•°
	// æµ…æ‹·è´: ä»…å¤åˆ¶èŠ‚ç‚¹æœ¬èº«
-----------------------------
# normalize
	å¤„ç†æ–‡æœ¬èŠ‚ç‚¹
    ï¼ˆåˆå¹¶ç›¸é‚»æ–‡æœ¬èŠ‚ç‚¹ï¼Œåˆ é™¤ç©ºç™½æ–‡æœ¬èŠ‚ç‚¹ï¼‰ => ä¸ºä»€ä¹ˆä¼šå‡ºç°å‘¢ï¼Ÿåç»­è§£é‡Š
-----------------------------
#è§£é‡Šï¼šç§»é™¤çš„èŠ‚ç‚¹ä»ç„¶ä¸ºæ–‡æ¡£æ‰€æœ‰ï¼Œ åªä¸è¿‡åœ¨æ–‡æ¡£ä¸­å·²ç»æ²¡æœ‰äº†è‡ªå·±çš„ä½ç½®ã€‚
    è¢«ç§»é™¤(æˆ–è¢«æ›¿æ¢çš„)çš„è¿™ä¸ªå­èŠ‚ç‚¹ä»ç„¶å­˜åœ¨äºå†…å­˜ä¸­,åªæ˜¯æ²¡æœ‰æ·»åŠ åˆ°å½“å‰æ–‡æ¡£çš„DOMæ ‘ä¸­,å› æ­¤,ä½ è¿˜å¯ä»¥æŠŠè¿™ä¸ªèŠ‚ç‚¹é‡æ–°æ·»åŠ å›æ–‡æ¡£ä¸­,å½“ç„¶,å®ç°è¦ç”¨å¦å¤–ä¸€ä¸ªå˜é‡æ¯”å¦‚ä¸Šä¾‹ä¸­çš„oldChildæ¥ä¿å­˜è¿™ä¸ªèŠ‚ç‚¹çš„å¼•ç”¨. å¦‚æœä½¿ç”¨ä¸Šè¿°è¯­æ³•ä¸­çš„ç¬¬äºŒç§æ–¹æ³•, å³æ²¡æœ‰ä½¿ç”¨ oldChild æ¥ä¿å­˜å¯¹è¿™ä¸ªèŠ‚ç‚¹çš„å¼•ç”¨, åˆ™è®¤ä¸ºè¢«ç§»é™¤çš„èŠ‚ç‚¹å·²ç»æ˜¯æ— ç”¨çš„, åœ¨çŸ­æ—¶é—´å†…å°†ä¼šè¢«å†…å­˜ç®¡ç†å›æ”¶.
```

##### 3 æ–‡æ¡£æŸ¥æ‰¾å…ƒç´ 

PS: éƒ½2021å¹´äº†ï¼Œç”¨`querySelector`å§ï¼

- document.getElementById();
- document.getElementsByTagName();
- document.getElementByName() => è·å–ç›¸åŒçš„nameå±æ€§çš„æ ‡ç­¾

##### 4 æ–‡æ¡£å†™å…¥

```js
document.write();

document.writeLn();

document.open();   // æ‰“å¼€è¾“å…¥æµ

document.close();

window.onload  = function() {
    document.write('hello'); //åœ¨åŠ è½½æ–‡æ¡£ä»¥åä½¿ç”¨writeå°†ä½¿å¾—é¡µé¢é‡è½½
}
```

#### äºŒ Nodeç±»å‹

##### 1 Document

- nodeTypeä¸º 9
- documentèŠ‚ç‚¹ï¼Œä»£è¡¨æ•´ä¸ªHTMLæ–‡æ¡£å¯¹è±¡ã€‚ä¸”æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ª

```js
document.body => ç›´æ¥è·å–body
document.title => è·å¾—æ–‡æœ¬å†…å®¹ï¼Œå¯ç›´æ¥èµ‹å€¼ä¿®æ”¹
document.URL
document.domain => ä¸åŒå­åŸŸçš„è·¨åŸŸå¯¼è‡´æ— æ³•é€šä¿¡(JSäº’ç›¸åŒè®¿é—®)ï¼Œè®¾ç½®ç›¸åŒå¯è§£å†³è¿™ä¸ªé—®é¢˜
document.doctType => è·å–<!DOCTYPE>çš„å¼•ç”¨
```

##### 2 Element

- nodeTypeä¸º 1
- å…¶æœ‰å±æ€§nodeNameæŒ‡å…ƒç´ çš„æ ‡ç­¾å
- Webç¼–ç ä¸ä»…HTMLï¼Œä¹Ÿæœ‰XML

```js
var my = document.getElementById('my');
my.tagName === my.nodeName; å³éƒ½æ˜¯DIVï¼Œ(å˜å°å†™çš„æ–¹æ³•æ˜¯toLowerCase())
HTMLä¸­çš„æ ‡ç­¾åéƒ½æ˜¯å¤§å†™
```

**åœ¨HTMLé¡µé¢ä¸­**

 HTMLå…ƒç´ é€šè¿‡`HTMLElement`ç±»å‹è¡¨ç¤ºï¼Œ

HTMLElement`ç»§æ‰¿`è‡ªElementå¹¶æ·»åŠ äº†ä¸€äº›å…±æœ‰å±æ€§ã€‚

1. `id`

   å…ƒç´ åœ¨æ–‡æ¡£çš„å”¯ä¸€æ ‡è¯†ç¬¦

2. `title`

   é™„åŠ è¯´æ˜ä¿¡æ¯

3. `className`

   ä¸ å…ƒç´ çš„classç‰¹æ€§å¯¹åº”ã€‚

```js
ä¾‹å­
var me = document.getElementById('theMe');
	me.id
	me.className
	me.title
å¯ç›´æ¥è®¿é—®ä¹Ÿå¯ç›´æ¥å»ä¿®æ”¹ï¼
```

**elementHTMLæä¾›çš„ç‰¹æ€§æ“ä½œ**

1. getAttribute

   ```js
   # å¤šç”¨äºè·å–æˆ‘ä»¬è‡ªå®šä¹‰çš„å±æ€§
   me.getAttribute('id');
   me.getAttribute('class'); => ç­‰åŒäº me.className
   ```

2. setAttribute

   è®¾ç½®ç‰¹æ€§ï¼Œæ³¨æ„è¿™ç§æ˜¯ä¸€ç§æ›¿æ¢çš„å…³ç³»ï¼

   ```js
   my.setAttribute('id', 'someId'); 
   # è®¾ç½®çš„keyæˆ–è‡ªå®šä¹‰çš„ç‰¹æ€§åæ°¸è¿œéƒ½ä¼šè¢«è½¬ä¸ºå°å†™
   my.mycolor Ã— è¿™ç§è‡ªå®šä¹‰çš„è®¾ç½®ï¼Œæ˜¯ä¸æ”¯æŒçš„ï¼
   ```

3. removeAttribute

   ```js
   my.removeAttribute('xxxx');
   ```

##### 3 å±æ€§èŠ‚ç‚¹ï¼ˆç‰¹æ€§èŠ‚ç‚¹ï¼‰

- nodeTypeä¸º2
- è™½æ˜¯èŠ‚ç‚¹ï¼Œä½†ä¸è®¤ä¸ºæ˜¯DOMæ–‡æ¡£æ ‘çš„ä¸€éƒ¨åˆ†ã€‚
- nodeNameå³ç‰¹æ€§åç§°ã€‚nodeValueå³ç‰¹æ€§å€¼ã€‚
- `æ­£å¸¸å¼€å‘ä¸ä¼šç›´æ¥å¼•ç”¨å±æ€§èŠ‚ç‚¹çš„`

çœŸå®å¼€å‘ä¸­ï¼Œä½¿ç”¨å±æ€§èŠ‚ç‚¹æ“ä½œååˆ†éº»çƒ¦ï¼Œäº†è§£å³å¯ã€‚

Elementç±»å‹æ˜¯ç”¨attributeså±æ€§çš„å”¯ä¸€ä¸€ä¸ªDOMèŠ‚ç‚¹ç±»å‹

å…¶æœ‰attributeså±æ€§ï¼Œå€¼ä¸ºä¸€ä¸ªNsmeNodeMapï¼ˆç±»ä¼¼nodeListï¼‰ï¼Œæ˜¯åŠ¨æ€é›†åˆã€‚

`å…ƒç´ æ¯ä¸€ä¸ªç‰¹æ€§éƒ½ç”±ä¸€ä¸ªAttrèŠ‚ç‚¹è¡¨ç¤º`

1. getNamedItem
2. setNamedItem
3. removeNamedItem

```js
my.attributes.getNamedItem('id').nodeValue'
my.attributes['id'].nodeValue;
my.attributes['id'].nodeValue = 'theme';
my.attributes.removeNamedItem('id');
my.attributes.setNamedItem(newAtrr)
```

##### 4 æ–‡æœ¬èŠ‚ç‚¹

- nodeTypeä¸º3
- parentNodeæ˜¯Element
- æ²¡æœ‰å­èŠ‚ç‚¹

æ–‡æœ¬èŠ‚ç‚¹çš„æ“ä½œ

1. åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹

   ```js
   document.createTextNode('hello, world');
   ```

2. å…³äºnormallize

   ```js
   ä¸€ä¸ªå…ƒç´ ä¸‹å¯èƒ½ä¼šæœ‰å¤šä¸ªæ–‡æœ¬å­èŠ‚ç‚¹ï¼Œä½†å…¶å®è§†è§‰ä¸Šè¿˜æ˜¯è¿èµ·æ¥çš„ï¼Œä¼šè®¤ä¸ºæ˜¯ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ã€‚
   æ•…ç”¨normallizeåˆå¹¶è¿™ç±»æ–‡æœ¬èŠ‚ç‚¹ã€‚
   #ä¸ºä»€ä¹ˆä¼šå‡ºç°å‘¢ï¼Ÿ
   ä½¿ç”¨jsæ“ä½œdomæ—¶å€™ï¼Œ æˆ‘ä»¬ä¼šåˆ›å»ºå¤šä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼Œå†appendChildè¿›å»ï¼Œå°±ä¼šå‡ºç°è¿™ç§iæƒ…å†µã€‚
   ```

##### 5 æ³¨é‡Šç±»å‹

commentç±»å‹

- nodeTypeä¸º8
- ç±»ä¼¼äºtextç±»å‹
- å¯æ ¹æ®nodeValueäºdataè®¿é—®

##### 6 DocumentFragment

- è½»é‡çº§æ–‡æœ¬ä»“åº“

```js
var fragment = document.createDocumentFragment();
for (var i = 0; i< 60; i++) {
    li = document.createElement('li');
    li.appendChild(document.createTextNode('i'));
    fragment.appendChild(li);
}
ul.appendChild(fragment);
```

##### 5 æ³¨æ„äº‹é¡¹

åˆ›å»º

```js
var my = document.createElement('div');
my.id = 'my';
my.setAttribute('class', 'me'); // my.className = 'me'
document.body.appendChild(my);
```

1. å…ƒç´ å¯ä»¥æœ‰ä»»æ„å­èŠ‚ç‚¹ä¸åä»£èŠ‚ç‚¹

2. å…ƒç´ ä¹Ÿå¯ä¸ºå…¶ä»–å…ƒç´ å­èŠ‚ç‚¹

   ```js
   <ul>
   	<li>1</li>
   	<li>2</li>
   	<li>3</li>
   </ul>
   
   #1 
   	ul æœ‰ä¸‰ä¸ªèŠ‚ç‚¹ => 3ä¸ªliå…ƒç´ 
   	å¹¶ä¸”è¿˜æœ‰4ä¸ªæ–‡æœ¬èŠ‚ç‚¹ã€‚4ä¸ªæ–‡æœ¬ä¹‹é—´çš„æ¢è¡Œç¬¦ï¼
   #è‹¥è¦è¿›è¡Œéå†ã€‚ä¸€å®šè¦åˆ¤æ–­æ˜¯å¦ä¸ºnodeTypeä¸º1ï¼
   	ul.childNodes[i].nodeType === 1 ? xxxx : xxxxxxxx
   å½“ç„¶å¯ä»¥è¿™æ ·
   	ul.getElementByTagName('li');
   ```

#### ä¸‰ DOMæ“ä½œæŠ€æœ¯

ä»€ä¹ˆæ˜¯DOMæ“ä½œï¼Ÿ

domæ“ä½œæŒ‡å¾—æ˜¯ å†jsç¨‹åºä¸­è¿›è¡Œdomçš„æ“ä½œï¼Œè¿™å¾€å¾€æ˜¯å¼€é”€çš„æœ€å¤§éƒ¨åˆ†ã€‚ä¹Ÿæ˜¯å› ä¸ºNodeListåœ¨å®æ—¶çš„æ›´æ–°ï¼Œéƒ½åŸºäºä¸€æ¬¡è¿è¡ŒæŸ¥è¯¢ã€‚æœ€å¥½çš„åŠæ³•å°±æ˜¯å‡å°‘DOMæ“ä½œï¼

1. åŠ¨æ€è„šæœ¬

   ```js
   var script = document.createElement('script');
   script.type = 'text/javascript';
   script.src = 'client.js';
   document.body.appendChild('script');
   ```

2. åŠ¨æ€æ ·å¼

   ```js
   ä¾‹ï¼š <link rel="stylesheet" type="text/css" href "./style.css"></link>
   
   var link = document.createElement('link');
   link.rel = 'stylesheet';
   link.type = 'text/css';
   link.href = './style.css'
   document.getElementByTagNames('head')[0].appendChild(link)
   ```

3. æ“ä½œè¡¨æ ¼ ç•¥

4. ç†è§£NodeList  (åº•å±‚ï¼Œä»¥åä¼šå›æ¥çš„)

## ç¬¬åç«  DOMæ‰©å±•

### ä¸€  é€‰æ‹©ç¬¦

`æ ¹æ®CSSé€‰æ‹©ç¬¦å»è·å–å…ƒç´ `

1. `querySelector()`

2. `querSelectorAll()`

   querSelectorAllï¼ˆï¼‰ è¿”å›çš„æ˜¯ä¸€ä¸ª`NodeListå®ä¾‹`(ä½ å¯¹NodeListæœ‰ä»€ä¹ˆç†è§£å‘¢ï¼Ÿ)

   æ­¤NodeListæ˜¯ç±»æ•°ç»„ï¼Œå¹¶éåŠ¨æ€æŸ¥è¯¢ï¼Œæ•…ä¸ä¼šåŠ¨æ€æ›´æ–°ã€‚

   - å¯ä»¥ä½¿ç”¨ ä¸‹æ ‡å»è®¿é—®ï¼Œä¹Ÿå¯ä»¥ç”¨itemæ–¹æ³•å»è®¿é—®ã€‚
   - ä¸ºä»€ä¹ˆç”¨itemå¯ä»¥è®¿é—®NodeListå‘¢ï¼Ÿ => NodeListå®ä¾‹é—®é¢˜äº†

##### å…ƒç´ éå†(IE9)

ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬éœ€è¦éå†å†åˆ¤æ–­nodeTypeæ˜¯å¦ä¸º1ï¼Œ

ä½†ie9ä¸“é—¨æä¾›äº†è·å–å…ƒç´ çš„æ–¹æ³•.

1. xxx.`firstElementChild `

   xxx.firstChildè¿›åŒ–ç‰ˆ

2. xxx.`lastElementChild`

   xxx.lastChild

3. xxx.`previousElementSibling`

   xxx.prviousSibling

4. xxx.`nextElementSibling`

   xxx.previousSibling

5. xxx.`cuhildElementCount` 

    å³ xxx.childNodes.lengthçš„å…ƒç´ ç‰ˆ

### äºŒ HTML5

1. document.`getElementsByClassName()`

   å¯åŒæ—¶ä¼ å…¥ä¸¤ä¸ªç±»å, ä»£è¡¨å¹¶é›†å…³ç³»ã€‚

2. `classList`(IE10æ”¯æŒï¼Œæ³¨æ„å…¼å®¹æ€§)

   ```js
   div.classList.add('current');
   div.classList.remove('current');
   div.classList.toggle('current'); // toggle åˆ‡æ¢
   div.classList.contains('current'); // æ˜¯å¦åŒ…å«
   ```

3. `è¾…åŠ©ç„¦ç‚¹`

   `document.activeElement` => æ­¤å±æ€§å§‹ç»ˆæŒ‡å‘ DOMä¸­å½“å‰è·å¾—äº†ç„¦ç‚¹çš„å…ƒç´ 

   - åˆšåŠ è½½å®Œæˆæ—¶å€™ï¼Œdocument.activeElementä¿å­˜ç€document.body

   - ç¤ºèŒƒ:

     theButton.hasFocus();

     theButton.focus();

4. ç›‘å¬HTMLçš„Documentçš„åŠ è½½çš„å˜åŒ–

   ```js
   ä¸€èˆ¬æ¥è¯´:
   	window.onload = function() {}
   ä¹Ÿå¯ä»¥æ ¹æ®
   	document.onreadystatechange()è¿™ä¸ªæ–¹æ³•ï¼Œ
       æ¥å» åˆ¤æ–­ window.readyStateå±æ€§æ˜¯ loadingè¿˜æ˜¯ complete
   ```
   
5. åˆ¤æ–­æ˜¯æ ‡å‡†è¿˜æ˜¯æ··æ‚

   ```
   æ ‡å‡†æ¨¡å¼ï¼š
   	document.compatMode === 'CSS1Compat'
   æ··æ‚
   	document.compateMode === 'BackCompat'
   ```

6. document.headå¿«é€Ÿè®¿é—®headæ ‡ç­¾

7. H5å­—ç¬¦é›†

   ```
   document.charset
   document.defaultCharset
   ```

8. è‡ªå®šä¹‰æ•°æ®å±æ€§ å…ƒç´ å±æ€§çš„ datasetè®¿é—®

   ```js
   <div  id="the" data-myname = 'theDiv'></div>
   åˆ™å¯ä»¥è¿™æ ·
   	document.getElementById('the').dataset.myname
   ```

9. æ’å…¥æ ‡å¿—

   ```js
   document.innerHTML => åˆ›å»ºæ–°çš„DOMæ ‘
   document.outerHTMK => å†…éƒ¨å¯¹è±¡ä¸å†…å®¹ï¼ŒèŒƒå›´æ›´å¤§ï¼Œä½†ä¸å»ºè®®è¿™æ ·å»è¦†ç›–å…¶çˆ¶
   ```

10. scrollIntoViewæ–¹æ³• ï¼ˆæ‰€æœ‰å…ƒç´ çš†æœ‰æ­¤æ–¹æ³•ï¼‰

```js
document.forms[0].scrollIntoView(); å¹³é½è§†å£ï¼Œå½“ç„¶focusä¹Ÿå¯ä»¥å®ç°
```

---

### ä¸‰ æ–‡æ¡£æ¨¡å¼

é¡µé¢çš„ã€æ–‡æ¡£æ¨¡å¼ã€‘å†³å®šäº†å¯ä»¥é¡µé¢

- å¯ä»¥ä½¿ç”¨å“ªä¸ªçº§åˆ«çš„CSS
- JSä¸­å¯ä»¥ä½¿ç”¨å“ªäº›API
- å¦‚ä½•å¯¹å¾…æ–‡æ¡£ç±»å‹doctype

IE9ä¸ºå‡†ï¼Œæœ‰ä»¥ä¸‹å››ç§æ–‡æ¡£æ¨¡å¼

1. IE5ï¼šæ··æ‚æ¨¡å¼ => æ•…ie8åä¸å¯ä½¿ç”¨æ­¤æ–‡æ¡£æ¨¡å¼ã€‚              
2. IE7:   IE7æ ‡å‡† =>ie8å·²ä¸å¯ç”¨ã€‚
3. IE8:   éƒ¨åˆ†CSS3ï¼Œä¸€äº›H5ï¼Œä½†ES6ä¸å¯ä½¿ç”¨ï¼
4. `IE9`: IE9æ ‡å‡†ã€‚ CSS3 ES6 H5 => ç›®å‰æˆ‘ä»¬éƒ½åº”è¯¥æ˜¯ä½¿ç”¨ie9æ ‡å‡†è¦æ±‚å¼€å‘ã€‚

å¦‚ä½•å¼ºåˆ¶æµè§ˆå™¨ä»¥æŸç§æ ‡å‡†æ¨¡å¼æ¸²æŸ“é¡µé¢å‘¢ï¼Ÿ

```js
è®¾ç½®HTTPå¤´éƒ¨ä¿¡æ¯ X-UA-Compile æˆ–è€…ä½¿ç”¨ ç­‰ä»·çš„<meta>æ ‡ç­¾è¿›è¡Œæ¸²æŸ“
ä¾‹:
	<meta http-equiv="X-UA-Compatible" content="IE=9"
é‡ç‚¹åœ¨äº content = "IE=IEVersion"
å…¶ IEVersionå¯ä»¥ä¸ºä»¥ä¸‹:
	EmulateIE9 EmulateIE8  EmulateIE7 => è‹¥æœ‰æ–‡æ¡£ç±»å‹ï¼Œåˆ™ä»¥æ­¤æ ‡å‡†ï¼Œ å¦åˆ™æ–‡æ¡£ä¸ºIE5ï¼
	9 8 7		=> å¼ºåˆ¶æ¸²æŸ“ï¼Œæ— è§†æ–‡æ¡£ç±»å‹çš„é™åˆ¶ã€‚
```

### å›› childrenä¸childNodes

```js
ele.children.length 	=>æŒ‡ å…ƒç´ èŠ‚ç‚¹ çš„æ•°é‡
ele.childNodes.length	=>æŒ‡ æ‰€æœ‰èŠ‚çš„æ•°é‡ï¼Œè‹¥å–å…ƒç´ èŠ‚ç‚¹ï¼Œåˆ™éœ€è¦åˆ¤æ–­nodeTypeæ˜¯å¦ä¸º1  
```

1. æ’å…¥æ–‡æœ¬

   ```js
div.innerText();
   
   div.textContent = '123' // 
   ```
   



## ç¬¬åäºŒç«  DOM2å’ŒDOM3

æœ¬ç« å†…å®¹ï¼š

1. DOM2å’ŒDOM3çš„å˜åŒ–
2. æ“ä½œæ ·å¼ä¸API
3. DOMçš„éå†ä¸èŒƒå›´

### 1 DOMç­‰çº§çš„å®šä¹‰

- DOM1çº§ æ˜¯ HTML å’Œ XMLæ–‡æ¡£çš„**åº•å±‚æ¶æ„**ã€‚
- DOM2çº§ 
  1. æ ¸å¿ƒï¼šä¸€çº§æ ¸å¿ƒåŸºç¡€ä¸Šå†ä¸ºèŠ‚ç‚¹æä¾›äº†å±æ€§ä¸æ–¹æ³•
  2. è§†å›¾ï¼šä¸ºæ–‡æ¡£å®šä¹‰äº†åŸºäºæ ·å¼ä¿¡æ¯çš„ä¸åŒè§†å›¾
  3. äº‹ä»¶ï¼šè¯´æ˜å¦‚ä½•ç”¨äº‹ä»¶ä¸DOMæ–‡æ¡£äº¤äº’ï¼Œè¯¦æƒ…çœ‹ä¸‹ä¸€ç« 
  4. æ ·å¼ï¼šä»¥ç¼–ç¨‹æ–¹å¼æ¥ä¸æ ·å¼äº¤äº’
  5. éå†ä¸èŒƒå›´ï¼šå¼•å…¥äº†éå†DOMæ–‡æ¡£å’Œé€‰æ‹©å…¶ç‰¹å®šéƒ¨åˆ†çš„æ–°æ¥å£
  6. HTMLï¼šæ·»åŠ äº†æ›´å¤šå±æ€§ æ–¹æ³• ä¸ æ–°æ¥å£

### 2 æ ¸å¿ƒå˜åŒ–

`DOM2çº§ä¸ä¸‰çº§çš„æ„ä¹‰åœ¨äºæ‰©å±•DOMæ­¤APIæ¥å£ã€‚`

1. document.doctypeæ–‡æ¡£ç±»å‹æ›´ç»†çš„åˆ’åˆ†äº†

   å…¶æœ‰ publicId | systenId  | name

2. Documentç±»å‹å˜åŒ–ï¼Œ

   ä»ä¸€ä¸ªæ–‡æ¡£ä¸­è·å¾—èŠ‚ç‚¹ï¼Œç„¶åå†å¯¼å…¥åˆ°å¦ä¸€ä¸ªæ–‡æ¡£ä¸­ï¼Œç±»ä¼¼å…‹éš†

   ```js
   å‚æ•°1 ä»£è¡¨å¤åˆ¶çš„å…ƒç´ 
   å‚æ•°2 æ˜¯å¦å¤åˆ¶å­èŠ‚ç‚¹
   var cloneTable = document.importNode(table, true);
   // è¿™ç§å½¢å¼ç±»å‹ä¸ cloneNodeçš„ä½¿ç”¨æ–¹å¼å’¯
   ```

   æ¯ä¸ªèŠ‚ç‚¹å¢åŠ äº†ä¸€ä¸ª`ownerDocument`å±æ€§ï¼Œè¡¨ç¤ºå½’å±çš„æ–‡æ¡£ã€‚

3. è§†å›¾æ–°å¢defaultView   ç±»ä¼¼æŒ‡é’ˆä½œç”¨ï¼ŒæŒ‡å‘ç»™å®šæº

   å³ç¡®å®šè¯¥æ–‡æ¡£å½’å±å¾—çª—å£ã€‚å¤‡æ³¨ï¼š çª—ä½“ä¸‹ æ‰æœ‰æ–‡æ¡£ framsã€Nã€‘

   ```js
   var parentWindow = document.defaultView  || document.parentWindow;
   ```

4. ä¸ºdocument.implementationå¯¹è±¡æä¾›æ–°æ–¹æ³•

   ```js
   # åˆ›å»º ä¸€ä¸ªæ–°çš„ DocumentTypeç±»å‹çš„èŠ‚ç‚¹
   document.implementation.createDocumentType(doctype, publicId, systemId) 
   -----------------------------------------
   1 å‘½åç©ºé—´ è™½ç„¶ä¸ºnullä¹Ÿå¯ä»¥ï¼Œ æ¯•ç«Ÿhtmlæ ‡ç­¾çš„ xmlnsæœ‰é»˜è®¤å€¼
   2 æ–‡æ¡£å…ƒç´ åç§° 
   3 æ–‡æ¡£ç±»å‹
   	document.implementation.createDocument(namespaceURL, 'html', doctype)
   -----------------------------------------
   
   # ä¸€ä¸ªæ›´åŠ å¿«é€Ÿçš„æ–¹æ³•, æ— éœ€ä¼ å‚å³å¯é»˜è®¤ç”Ÿæˆ
   document.implementation.createHTMLDocument(); // ç”Ÿæˆå®Œæ•´å¾—HTML
   ```

5. Nodeç±»å‹

   ```js
   node.isSupported('ç‰¹å§“å', ç‰¹æ€§ç‰ˆæœ¬å·);
   node.isSameNode('somNode'); // ç›¸åŒ => èŠ‚ç‚¹å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡
   node.isEqualNode('someNode') // ç›¸ç­‰ => ç›¸åŒç±»å‹ä¸”æœ‰ç›¸ç­‰çš„å±æ€§ï¼Œå†…éƒ¨å®Œå…¨ä¸€æ ·ã€‚
   æ•… sameæ˜¯å®Œå…¨ä¸€æ ·ï¼Œequalæ˜¯é•¿å¾—ä¸€æ¨¡ä¸€æ ·ï¼
   ```

6. æ¡†æ¶

   ä»å‰ä»…æœ‰é€šè¿‡iframesé›†åˆè·å–ï¼Œç°åœ¨å¯ä»¥é€šè¿‡è®¿é—® contentDocumentè·å–æ–‡æ¡£å¯¹è±¡

   ```js
   var iframe = document.getElementById('myIframe');
   var iframeDoc = iframe.contentDocument;
   ```

7. DOM3çº§æä¾›äº†è®¾ç½®DOMèŠ‚ç‚¹å±æ€§çš„æ–°æ–¹æ³•

   ```js
   setUserDataç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œå¯ä»¥æ¥å—åˆ°5ä¸ªå‚æ•°ã€‚
   	operation | 	key | value | src | dest
   	æ“ä½œç±»çš„æ•°å€¼ 		é”®å	 é”®å€¼		æºèŠ‚ç‚¹ ç›®æ ‡èŠ‚ç‚¹
   document.body.setUserData('nameâ€˜, 'huangpeng', function() {} );
   
   document.body.getUserData('name');
   ```

### 3 æ ·å¼

JSä¸­çš„å…ƒç´ æ ·å¼ä¸ºä»€ä¹ˆå¯ä»¥ç”Ÿæ•ˆå‘¢ï¼Ÿ

ä¾‹ï¼š document.body.style => æ­¤styleå¯¹è±¡æ˜¯ CSSStyleDeclarationå®ä¾‹.

1. æ³¨æ„ï¼š è¿™æ ·è·å–åˆ°çš„styleæ ·å¼ æ˜¯ ä»…åŒ…æ‹¬ å…ƒç´ èŠ‚ç‚¹çš„styleæ ·å¼çš„ï¼ä¸åŒ…æ‹¬å¤–éƒ¨æ ·å¼è¡¨
2. åŸºäºCSSStyleDeclarationçš„æ ·å¼å±æ€§æ˜¯ä»¥é©¼å³°å‘½åæ³•èµ·åçš„ï¼Œæ²¡æœ‰ - è¿™ä¸ªç¬¦å·ï¼

ä»‹ç»ä¸‹ å…¶åŸå‹é“¾

```js
document.body.style._proto_ => CSSStyleDeclaration.proptotype => Object.prototyoe

æ¯ä¸ªå…ƒç´ ä¸‹æœ‰styleå¯¹è±¡çš†æ˜¯ CSSStyleDeclarationå®ä¾‹ï¼Œä¿®æ”¹è¿™é‡Œæ—¶å€™ã€‚å¯ä»¥å®ç°åŠ¨æ€æ›´æ–°ï¼
```

- DOM2çº§èµ‹äºˆ CSSStyleDeclaration æ›´å¤šçš„æ–¹æ³•

  1. `cssText`ï¼šè·å–å…ƒç´ è¡Œå†…æ ·å¼çš„CSSä»£ç 

     æœ‰è¯»å†™çš„ç‰¹æ€§ï¼Œ è¯»å¯è·å–styleç‰¹æ€§ä»£ç ï¼Œå†™å¯ä»¥ä¸€æ¬¡æ€§é‡ç½®å…¶è¡Œå†…æ ·å¼.

     - è¯»ï¼š
     - å†™ï¼š 

  2. document.body.style.`length`

     - æ¯ä¸€ä¸ªCSSStyleDeclarationå®ä¾‹é€šè¿‡æ„é€ å‡½æ•°çš†æœ‰355ä¸ªå›ºå®šå±æ€§ï¼Œè¿™äº›å›ºå®šå±æ€§å¹¶ä¸å±äºæ•°ç»„å†…å®¹ï¼Œåªæ˜¯é™„åŠ å‚æ•°

     - é€šè¿‡styleç‰¹æ€§è®¾ç½®åæœ‰`N`ä¸ªå±æ€§ï¼Œè¿™äº›æ‰æ˜¯æœ‰ä¸‹æ ‡çš„ï¼Œå¯ä»¥è®¿é—®åˆ°ã€‚

     - æ•…å¯ä»¥è¿™æ ·

       ```js
       for (var i = 0, len = myDiv.style.length; i <len; i++) {
          prop = myDiv.style[i]; // æ³¨æ„ è·å–çš„å±æ€§ï¼
          value = myDiv.style.getPropertyValue(prop);
           console.log(prop + ':' + value);
       }
       ```

  3. removeProperty(å±æ€§å)ï¼›

  4. è®¿é—®`æ ·å¼è¡¨ä¸­çš„æ ·å¼`çš„æ–¹æ³•

     - IE8ä¸æ”¯æŒ getComputedStyleæ–¹æ³•ï¼Œæ•…è¯¥ä½¿ç”¨ `currentStyle`å±æ€§ï¼›

     - æ­¤å±æ€§ä»…åªè¯»ï¼Œ è¿”å›æ•°ç»„ä¸ä¸€ç³»åˆ—å±æ€§ï¼ï¼Œä¿å­˜çš„æ˜¯å…ƒç´ å®é™…ä½¿ç”¨ä¸­çš„å±æ€§åï¼Œ ä¸å…¶å€¼ã€‚

       `è¿™é‡Œç»™ä¸äº†å¾ˆå¤§çµæ´»æ€§ï¼Œèµä¸€ä¸ªï¼`

       ```js
       document.defaultView.getComputedStyle(document.body).width;
       è¿™æ ·æ˜¯å¯ä»¥å¿«é€Ÿåˆ°å€¼çš„ï¼
       ```

     - å…³äºå…¶é¢œè‰²å±æ€§ï¼Œè¿”å›çš„æ€»æ˜¯rgbaç±»å‹

     - å¤åˆæ ·å¼ï¼ˆå¦‚borderè¿™ç±»ï¼‰ä¸åŒæµè§ˆå™¨å¯èƒ½è¿”å›ç»“æœä¸åŒ

     - ```js
       div.currentStyle => è¿”å›çš„æ˜¯ä¸€ä¸ªç›¸å¯¹å•ä½
       
       document.defaultView.getComputedStyle(div, null); 
       ç›¸å¯¹å•ä½ä¼šå˜ä¸ºç»å¯¹å•ä½ï¼
       ```

     å¤‡æ³¨: documemt.defaultView å³ window

     ```js
     // ç¬¬äºŒä¸ªå‚æ•° å³ ä¼ªç±»ï¼Œ ä¾‹ :after
     document.defaultView.getComputedStyle(document.body, null);
     ```
     
     - æ­¤å¤–
     
       ```js
       div.style.width = 20;
       # æ··æ‚æ¨¡å¼å¯ä»¥ï¼Œ ä¼šè‡ªåŠ¨è¡¥é½ã€‚ ä½†æ ‡å‡†æ¨¡å¼æ‚¨åº”è¯¥ç»™ä¸ '20px'
       ```


### 4 æ ·å¼è¡¨ï¼ˆæ¥ä¸Šï¼‰

æˆ‘ä»¬å¦‚ä½•æ“ä½œä¸€ä¸ªæ ·å¼è¡¨å‘¢ï¼Ÿ

1. åœ¨<link>ä¸<style>ä¸­å®šä¹‰çš„å…¶å®éƒ½æ˜¯æ ·å¼è¡¨ï¼Œåœ¨JSä¸­è®¤ä½œ`CSSStyleSheet`å®ä¾‹ã€‚

   å†ç»†åˆ† linkä¸ºHTMLLinkElement

   â€‹		    styleä¸ºHTMLStyleElement

   ä¸è¿‡ä»–ä»¬éƒ½æ˜¯CSSStyleSheet

2. è¯·è®¿é—® `document.styleSheets`ï¼Œ è®¿é—®lengthå±æ€§å³å¯è·å–åˆ°æ ·å¼è¡¨æ•°é‡ã€‚

   å…¶styleSheetså±æ€§ä¸‹æ¯ä¸€ä¸ªæ ·å¼è¡¨å¯¹è±¡éƒ½æ˜¯åŸºäºCSSStyleShhetå®ä¾‹ç”Ÿæˆçš„ã€‚

   æˆ‘ä»¬å¯ä»¥è®¿é—®å…¶ ä¸‹æ ‡å€¼ æˆ–è€…é€šè¿‡item(index)è¿™ç§æ–¹æ³•æ¥è®¿é—®ã€‚

   ```js
   document.styleShhet[0]._proto_ =>
   CSSStyleSheet.prototype =>
   Object.proptotype
   ```

3. CSSStyleShhetå®ä¾‹

   ä»…æœ‰ disbledå±æ€§ä¸æ˜¯åªè¯»çš„ï¼Œå¯ä»¥è®©æˆ‘ä»¬é€šè¿‡jsæ§åˆ¶æ‰“å¼€å“ªä¸€ä¸ªæ ·å¼è¡¨ï¼Œç¦ç”¨å“ªä¸ªæ ·å¼è¡¨ã€‚

   - disabledï¼š è¯»å†™ï¼Œæ˜¯å¦ç¦ç”¨
   - hrefï¼šè‹¥linkï¼Œåˆ™æŒ‡linkçš„href
   - mediaï¼šåª’ä½“ç±»å‹é›†åˆ
   - ownerNodeï¼šå½“å‰æ ·å¼è¡¨çš„èŠ‚ç‚¹æŒ‡é’ˆï¼ˆå¦‚linkä¸styleèŠ‚ç‚¹ï¼‰
   - parentStyleSheetï¼šè‹¥ç”±@importå¯¼å…¥ï¼Œåˆ™æŒ‡å‘å¯¼å…¥å®ƒçš„æ ·å¼è¡¨
   - typeï¼š èŠ‚ç‚¹typeï¼Œä¸€èˆ¬éƒ½æ˜¯ "type/css"
   - titleï¼š èŠ‚ç‚¹title

4. å…¶ä»–æ–¹æ³•

   ```js
   var link = document.querySelector('link').sheet; 
   IEä¸‹éœ€è¦ è·å– StyleSheet
   ```

   

### 5 æ ·å¼è¡¨è§„åˆ™

1. CSSStyleSheetå®ä¾‹ä¸‹æœ‰å±æ€§ CSSRuleå±æ€§ï¼Œå…¶åŸºäºCSSStyleRuleå®ç°ã€‚è¡¨ç¤ºæ ·å¼ä¿¡æ¯ã€‚
2. Psï¼š IE8å…¼å®¹éœ€è¦é¢å¤–æ–¹æ³•ã€‚
   - `cssRules / rules)` ï¼š å±æ€§åï¼Œè¡¨ç¤ºæ ·å¼è§„åˆ™é›†åˆï¼Œæ¯ä¸€é¡¹åŸºäºCSSStyleRuleå®ä¾‹
   - `ownerRules` ï¼š è‹¥ç”±@importå¯¼å…¥ï¼Œæ­¤å±æ€§ä¸ºæŒ‡é’ˆæŒ‡å‘å¯¼å…¥è§„åˆ™
   - `deleteRule / removeRule (index)`ï¼š åˆ é™¤è§„åˆ™
   - `inserRule / addRule (url, index)` ï¼š æ·»åŠ è§„åˆ™

```js
ä¾‹å¦‚ï¼š 
div .box {
    width: 100px;
    height: 100px;
}
var sheet = document.styleSheets[0];
var rules = sheet.cssRules || sheet.rules;	
var rule = rules[0];

rule.style.backgroudColor = 'blue';
# è­¦å‘Šï¼š
	è¿™æ ·ä¿®æ”¹ä¿®æ”¹å¾—æ˜¯æ ·å¼è¡¨çš„å†…å®¹ï¼Œä¼šåŠ¨æ€æ›´æ–°æ‰€æœ‰ã€‚
    
#æ³¨æ„:
æ³¨æ„æ­¤è§„åˆ™ä¸‹çš„å±æ€§éƒ½æ˜¯å¯ä»¥è¯»å†™çš„ï¼
 rule.style          => è¿”å›CSSStyleDeclarå®ä¾‹å¯¹è±¡
 rule.cssText		 => è¿”å›æ•´æ¡è§„åˆ™å¾—æ–‡æœ¬ 
 rule.parentRule	 => è‹¥æ˜¯å¯¼å…¥è§„åˆ™ï¼Œæ‰æœ‰
 rule.parentStyleSheet	=> å½“å‰è§„åˆ™æ‰€å±æ ·å¼è¡¨
```

1. åˆ›å»ºè§„åˆ™

   ```js
   sheet.insertRule('body { backgroud-color: silver}', 0);
   sheet.addRule('body', 'backgroud-color: silver', 0);
   ```

2. åˆ é™¤è§„åˆ™ 

   å®é™…å¼€å‘ä¸å»ºè®®åˆ é™¤è§„åˆ™

   ```js
   sheet.deleteRule(0);
   sheet.removeRule(0);
   ```

### 6 å…ƒç´ å¤§å°ä¸åç§»é‡

offsetHeightæŒ‡çš„æ˜¯å®é™…é«˜åº¦ã€‚

`offsetHeight`:  width + padding + border

`offsetWidth`:

`offsetLeft:`offsetLeftåŸºäºçˆ¶ç±»çš„borderï¼

`offsetTop`

```js
function getElementLeft(element) {
    var offsetLeft = element.offsetLeft;
    var offsetParent = element.offsetParent; // å…·æœ‰å®½é«˜æœ€è¿‘çš„å…ƒç´ 
    while (offsetParent) {
        offsetLeft += offsetParent.offsetLeft;
        offsetParent = offsetParent.offsetParent;
    }
}
```

`å®¢æˆ·åŒºå¤§å°`

æŒ‡å…ƒç´ å†… + å†…è¾¹è·ï¼Œ å¿½ç•¥äº†paddingã€‚å¤§å¤šç”¨äºè¡¨ç¤ºå¯è§†åŒ–çš„åŒºåŸŸã€‚

ç›¸æ¯”offsetWidthå°‘äº†ä¸€ä¸ªpadding

1. clientWidth
2. clientHeight

`æ»šåŠ¨å¤§å°`: æŒ‡æ— æ»šåŠ¨æ¡ä¸‹çš„é«˜åº¦ ä¸ å®½åº¦

scrollHeightï¼š å¯çœ‹ä½œclientWidthåœ¨æ²¡æœ‰æ»šåŠ¨æ¡çš„æƒ…å†µä¸‹ï¼

scrollWidth

`å¦‚ä½•æ§åˆ¶æ»šåŠ¨æ¡å‘¢ï¼Ÿ`

é€šè¿‡æ§åˆ¶ä¸€ä¸ªå…ƒç´ çš„scrollTopä¸scrollLeftå¯ä»¥æ§åˆ¶ã€‚

`å¦‚ä½•ç¡®å®šå…ƒç´ çš„è§†å£ä½ç½®å‘¢ï¼Ÿ`

```js
# è¿”å›ä¸€ä¸ªçŸ©å½¢å¯¹è±¡ã€‚ æ¯”å¦‚left top right bottom

element.getBoundingClientRect();

å…ƒç´ åœ¨é¡µé¢ç§ç›¸å¯¹äºè§†å£çš„ä½ç½®
```

### 7 DOMéå†

1. DOM2çº§éå†å®šä¹‰äº†ä¸¤ä¸ªç”¨äºè¾…åŠ©å®Œæˆ`é¡ºåºéå†DOMç»“æ„çš„ç±»å‹`ã€‚

   `NodeInIterator`  ä¸ `TreeWalker`

2. IEä¸æ”¯æŒDOMéå†

3. DOMéå†æ˜¯ æ·±åº¦ä¼˜å…ˆçš„DOMç»“æ„éå†ã€‚ä»¥ç»™å®šèŠ‚ç‚¹ä¸ºæ ¹ã€‚

4. æ¥ä¸‹æ¥çº¢å®ä¹¦è¯¦ç»†ä»‹ç»äº†è¿™ä¸¤ä¸ªç±» ä¸ èŒƒå›´ã€‚æˆ‘ä»¬ç•¥ã€‚å¾ˆé«˜æ·±ã€‚

```html
<html>
    <head>
        <title>123</title>
    </head>
    <body>
        <p>
            <b>Hello</b>
        	world!
        </p>
    </body>
</html>

éå†è¿‡ç¨‹  
			document
			html
head					body
title					p					
123					b		world
				 	hello
```







